<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>CLASSIFIED TERMINAL</title>

<script src="https://unpkg.com/@supabase/supabase-js@2/dist/umd/supabase.js"></script>

<style>
body {
  margin:0;
  background:black;
  color:#00ff00;
  font-family:Consolas, monospace;
  overflow:hidden;
}

#matrix {
  position:fixed;
  top:0;
  left:0;
  width:100%;
  height:100%;
  z-index:0;
}

#terminal {
  position:relative;
  z-index:2;
  padding:20px;
  white-space:pre-line;
  height:100vh;
  overflow-y:auto;
}

input {
  background:black;
  color:#00ff00;
  border:none;
  outline:none;
  font-family:Consolas, monospace;
}

body::after {
  content:"";
  position:fixed;
  inset:0;
  background:rgba(0,255,0,0.03);
  pointer-events:none;
  animation:flicker 0.15s infinite;
}

@keyframes flicker {
  0%{opacity:0.95;}
  50%{opacity:1;}
  100%{opacity:0.9;}
}
</style>
</head>
<body>

<canvas id="matrix"></canvas>
<div id="terminal"></div>

<script>
document.addEventListener("DOMContentLoaded", function(){

const SUPABASE_URL = "https://cxkagetcsfcgmdulsmqs.supabase.co";
const SUPABASE_KEY = "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImN4a2FnZXRjc2ZjZ21kdWxzbXFzIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NzIxMjY3MjgsImV4cCI6MjA4NzcwMjcyOH0.0e7oIHreYOjZEST4sf0bjn3hI2uzieT8SKAbp-8z2Fw";

const { createClient } = supabase;
const db = createClient(SUPABASE_URL, SUPABASE_KEY);

const terminal = document.getElementById("terminal");

function scrollToBottom(){
  terminal.scrollTop = terminal.scrollHeight;
}

function type(text, speed=25){
  return new Promise(resolve=>{
    let i=0;
    const interval=setInterval(()=>{
      terminal.innerHTML+=text.charAt(i);
      scrollToBottom();
      i++;
      if(i>=text.length){
        clearInterval(interval);
        resolve();
      }
    },speed);
  });
}

async function intro(){
  await type("BOOTING SECURE NODE...\n");
  await type("INITIALIZING ENCRYPTION...\n");
  await type("BYPASSING FIREWALL...\n");
  await type("ACCESSING MAINFRAME...\n");
  await type("ACCESS RESTRICTED.\n\n");
  askPassword();
}

function askPassword(){
  terminal.innerHTML+="ENTER ACCESS CODE: ";
  const input=document.createElement("input");
  terminal.appendChild(input);
  input.focus();

  input.addEventListener("keydown",function(e){
    if(e.key==="Enter"){
      if(input.value==="2006"){
        input.remove();
        accessGranted();
      }else{
        terminal.innerHTML+="\nACCESS DENIED.\n";
        input.value="";
      }
      scrollToBottom();
    }
  });
}

async function accessGranted(){
  await type("\nACCESS GRANTED.\n");
  await type("DOWNLOADING EVENT DOSSIER...\n");
  await type("DECRYPTING FILES...\n\n");

  showCountdown();
  await type("\n> DATE: 20.06.2026\n");
  await type("> LOCATION: ENCRYPTED\n");
  await type("> STATUS: INVITATION PENDING\n\n");

  askEmail();
}

function showCountdown(){
  const eventDate = new Date("2026-06-20T00:00:00").getTime();
  const timerLine = document.createElement("div");
  terminal.appendChild(timerLine);

  setInterval(()=>{
    const now = new Date().getTime();
    const diff = eventDate - now;
    const days = Math.floor(diff/(1000*60*60*24));
    const hours = Math.floor((diff%(1000*60*60*24))/(1000*60*60));
    const mins = Math.floor((diff%(1000*60*60))/(1000*60));
    timerLine.innerText = "> EVENT TIMER: "+days+"D "+hours+"H "+mins+"M";
  },1000);
}

function askEmail(){
  terminal.innerHTML+="ENTER YOUR EMAIL TO CONFIRM ACCESS: ";
  const input=document.createElement("input");
  terminal.appendChild(input);
  input.focus();

  input.addEventListener("keydown",async function(e){
    if(e.key==="Enter"){
      const val=input.value.trim();

      if(val==="admin"){
        terminal.innerHTML+="\nACCESSING LEVEL 2...\nCLASSIFIED FILES UNLOCKED.\nDRESS CODE: BLACK.\n";
        input.remove();
        return;
      }

      if(!val.includes("@")){
        terminal.innerHTML+="\nINVALID EMAIL FORMAT.\n";
        return;
      }

      terminal.innerHTML+="\nSTORING DATA...\n";
      const {error}=await db.from("emails").insert([{email:val}]);

      if(error){
        terminal.innerHTML+="DATABASE ERROR.\n";
      }else{
        terminal.innerHTML+="EMAIL REGISTERED.\nYOU ARE NOW PART OF THE OPERATION.\n\n";
        terminal.innerHTML+="STAY TUNED. MORE INFO TO COME.\n";
      }
      input.remove();
      scrollToBottom();
    }
  });
}

/* MATRIX BACKGROUND */
const canvas=document.getElementById("matrix");
const ctx=canvas.getContext("2d");
canvas.height=window.innerHeight;
canvas.width=window.innerWidth;
const letters="01";
const fontSize=14;
const columns=canvas.width/fontSize;
const drops=[];
for(let x=0;x<columns;x++) drops[x]=1;

function draw(){
  ctx.fillStyle="rgba(0,0,0,0.05)";
  ctx.fillRect(0,0,canvas.width,canvas.height);
  ctx.fillStyle="#0F0";
  ctx.font=fontSize+"px monospace";
  for(let i=0;i<drops.length;i++){
    const text=letters.charAt(Math.floor(Math.random()*letters.length));
    ctx.fillText(text,i*fontSize,drops[i]*fontSize);
    if(drops[i]*fontSize>canvas.height && Math.random()>0.975)
      drops[i]=0;
    drops[i]++;
  }
}
setInterval(draw,33);

intro();

});
</script>

</body>
</html>
