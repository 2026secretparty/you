<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>ACCESS TERMINAL</title>

<script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>

<style>
body {
  background-color: black;
  color: #00ff00;
  font-family: Consolas, monospace;
  padding: 20px;
}

#terminal {
  white-space: pre-line;
}

input {
  background: black;
  color: #00ff00;
  border: none;
  outline: none;
  font-family: Consolas, monospace;
}
</style>
</head>
<body>

<div id="terminal"></div>

<script>
document.addEventListener("DOMContentLoaded", function () {

  const terminal = document.getElementById("terminal");

  // ðŸ” Î’Î‘Î›Î• Î¤Î‘ Î”Î™ÎšÎ‘ Î£ÎŸÎ¥ Î£Î¤ÎŸÎ™Î§Î•Î™Î‘
  const SUPABASE_URL = https://cxkagetcsfcgmdulsmqs.supabase.co;
  const SUPABASE_KEY = eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImN4a2FnZXRjc2ZjZ21kdWxzbXFzIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NzIxMjY3MjgsImV4cCI6MjA4NzcwMjcyOH0.0e7oIHreYOjZEST4sf0bjn3hI2uzieT8SKAbp-8z2Fw;

  if (!window.supabase) {
    terminal.innerHTML = "ERROR LOADING DATABASE LIBRARY.";
    return;
  }

  const supabaseClient = window.supabase.createClient(
    SUPABASE_URL,
    SUPABASE_KEY
  );

  function typeText(text, callback) {
    let i = 0;
    const interval = setInterval(() => {
      terminal.innerHTML += text.charAt(i);
      i++;
      if (i >= text.length) {
        clearInterval(interval);
        if (callback) callback();
      }
    }, 35);
  }

  function askPassword() {
    terminal.innerHTML += "\n\nENTER ACCESS CODE: ";

    const input = document.createElement("input");
    document.body.appendChild(input);
    input.focus();

    input.addEventListener("keydown", function (e) {
      if (e.key === "Enter") {
        if (input.value === "2106") {
          input.remove();
          showInfo();
        } else {
          terminal.innerHTML += "\nACCESS DENIED.";
          input.value = "";
        }
      }
    });
  }

  function showInfo() {
    terminal.innerHTML += "\n\nACCESS GRANTED.\n";

    typeText(
`\n> DATE: 21.06.2026
> LOCATION: CLASSIFIED
> STATUS: INVITATION PENDING

\nENTER YOUR EMAIL TO CONFIRM ACCESS:
`,
      askEmail
    );
  }

  function askEmail() {
    const emailInput = document.createElement("input");
    document.body.appendChild(emailInput);
    emailInput.focus();

    emailInput.addEventListener("keydown", async function (e) {
      if (e.key === "Enter") {
        const email = emailInput.value.trim();

        if (!email.includes("@")) {
          terminal.innerHTML += "\nINVALID EMAIL FORMAT.";
          return;
        }

        terminal.innerHTML += "\n\nSTORING DATA...";

        const { error } = await supabaseClient
          .from("emails")
          .insert([{ email: email }]);

        if (error) {
          terminal.innerHTML += "\nDATABASE ERROR.";
          console.error(error);
        } else {
          terminal.innerHTML += "\nEMAIL STORED SUCCESSFULLY.";
        }

        emailInput.remove();
      }
    });
  }

  typeText("INITIALIZING SYSTEM...\nACCESS RESTRICTED.", askPassword);

});
</script>

</body>
</html>
