<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>CLASSIFIED OPERATION</title>

<script src="https://unpkg.com/@supabase/supabase-js@2/dist/umd/supabase.js"></script>

<style>
body{
    margin:0;
    background:black;
    overflow:hidden;
    font-family:Consolas, monospace;
    color:#00ff00;
}

/* MATRIX BACKGROUND */
canvas{
    position:fixed;
    top:0;
    left:0;
    z-index:0;
    opacity:0.15;
}

/* TERMINAL PANEL */
#panel{
    position:absolute;
    top:50%;
    left:50%;
    transform:translate(-50%,-50%);
    width:85%;
    max-width:1000px;
    height:85vh;
    background:rgba(0,0,0,0.95);
    border:2px solid #00ff00;
    box-shadow:0 0 30px #00ff00;
    padding:25px;
    overflow-y:auto;
    z-index:2;
    line-height:1.4em;
}

.line{
    white-space:pre-wrap;
    margin-bottom:8px;
}

.prompt::before{
    content:"C:\\OPERATION> ";
}

/* GLITCH EFFECT */
.glitch{
    animation:glitchAnim 0.25s infinite;
}

@keyframes glitchAnim{
    0%{text-shadow:2px 0 red,-2px 0 blue;}
    50%{text-shadow:-2px 0 red,2px 0 blue;}
    100%{text-shadow:2px 0 red,-2px 0 blue;}
}

input{
    background:black;
    color:#00ff00;
    border:none;
    outline:none;
    font-family:Consolas, monospace;
}
</style>
</head>

<body>

<canvas id="matrix"></canvas>
<div id="panel"></div>

<script>

document.addEventListener("DOMContentLoaded",function(){

const SUPABASE_URL="https://cxkagetcsfcgmdulsmqs.supabase.co";
const SUPABASE_KEY="ΒΑΛΕ_ΤΟ_ANON_PUBLIC_KEY";

const {createClient}=supabase;
const db=createClient(SUPABASE_URL,SUPABASE_KEY);

const panel=document.getElementById("panel");

const typeSound=new Audio("https://assets.mixkit.co/active_storage/sfx/2869/2869-preview.mp3");
const errorSound=new Audio("https://assets.mixkit.co/active_storage/sfx/2955/2955-preview.mp3");

function scrollBottom(){
    panel.scrollTop=panel.scrollHeight;
}

function createLine(text=""){
    const div=document.createElement("div");
    div.className="line";
    div.textContent=text;
    panel.appendChild(div);
    scrollBottom();
    return div;
}

function typeLine(text,speed=18){
    return new Promise(resolve=>{
        const line=createLine("");
        let i=0;

        const interval=setInterval(()=>{
            line.textContent+=text.charAt(i);

            typeSound.currentTime=0;
            typeSound.play().catch(()=>{});

            i++;

            scrollBottom();

            if(i>=text.length){
                clearInterval(interval);
                resolve();
            }

        },speed);
    });
}

/* ===== FAKE TRACE ===== */

async function fakeTrace(){
    await typeLine("TRACING NETWORK SIGNAL...");
    await typeLine("IP TRACE INITIATED.");

    for(let i=0;i<4;i++){
        let fakeIP=
        Math.floor(Math.random()*200)+"."+
        Math.floor(Math.random()*200)+"."+
        Math.floor(Math.random()*200)+"."+
        Math.floor(Math.random()*200);

        await typeLine("TRACE RESULT > "+fakeIP);
    }

    await typeLine("NETWORK TRACE COMPLETE.");
}

/* ===== INTRO ===== */

async function intro(){

    panel.classList.add("glitch");

    await typeLine("BOOT SEQUENCE INITIATED...");
    await typeLine("SECURE NODE ONLINE.");
    await typeLine("ENCRYPTION ACTIVE.");
    await typeLine("SCANNING GLOBAL NETWORK...");
    await fakeTrace();
    await typeLine("FIREWALL STATUS: BREACHED.");
    await typeLine("ACCESS LEVEL: RESTRICTED.");

    panel.classList.remove("glitch");

    askPassword();
}

/* ===== PASSWORD ===== */

function askPassword(){

    const line=createLine("ENTER ACCESS CODE:");
    line.classList.add("prompt");

    const input=document.createElement("input");
    line.appendChild(input);
    input.focus();

    input.addEventListener("keydown",function(e){

        if(e.key==="Enter"){

            if(input.value==="2006"){
                input.remove();
                accessGranted();
            }
            else{
                errorSound.play();
                createLine("ACCESS DENIED. TRY AGAIN.");
                input.value="";
            }
        }

    });
}

/* ===== ACCESS GRANTED ===== */

async function accessGranted(){

    await typeLine("ACCESS GRANTED.");
    await typeLine("DECRYPTING OPERATION DOSSIER...");

    await fakeTrace();

    showFakeLocation();

    startCountdown();

    await typeLine("OPERATION TITLE:");
    await typeLine("KONSTANTINOS & PYRROS BIRTHDAY PARTY");

    await typeLine("DRESS CODE: GLAMOROUS");

    await typeLine("DATE: 20.06.2026");
    await typeLine("STATUS: INVITATION PENDING");

    askEmail();
}

/* ===== FAKE LOCATION ===== */

function showFakeLocation(){

    let lat=(37+Math.random()).toFixed(4);
    let lon=(23+Math.random()).toFixed(4);

    createLine("GPS SIGNAL SIMULATION...");
    createLine("LAT: "+lat);
    createLine("LON: "+lon);
    createLine("RADIUS ESTIMATE: 20M");
}

/* ===== COUNTDOWN ===== */

function startCountdown(){

    const timer=createLine("EVENT TIMER INITIALIZING...");

    const eventDate=new Date("2026-06-20T00:00:00").getTime();

    setInterval(()=>{

        const now=new Date().getTime();
        const diff=eventDate-now;

        if(diff<0){
            timer.textContent="EVENT STARTED.";
            return;
        }

        const d=Math.floor(diff/(1000*60*60*24));
        const h=Math.floor((diff%(1000*60*60*24))/(1000*60*60));
        const m=Math.floor((diff%(1000*60*60))/(1000*60));
        const s=Math.floor((diff%(1000*60))/1000);

        timer.textContent=
        "EVENT TIMER: "+d+"D "+h+"H "+m+"M "+s+"S";

    },1000);
}

/* ===== EMAIL ===== */

function askEmail(){

    const line=createLine("ENTER YOUR EMAIL TO CONFIRM ACCESS:");
    line.classList.add("prompt");

    const input=document.createElement("input");
    line.appendChild(input);
    input.focus();

    input.addEventListener("keydown",async function(e){

        if(e.key==="Enter"){

            const val=input.value.trim();

            if(!val.includes("@")){
                errorSound.play();
                createLine("INVALID EMAIL. TRY AGAIN.");
                input.value="";
                return;
            }

            createLine("STORING DATA...");

            const {error}=await db
            .from("emails")
            .insert([{email:val}]);

            if(error){
                createLine("DATABASE ERROR.");
            }
            else{
                createLine("EMAIL REGISTERED.");
                createLine("YOU ARE NOW PART OF THE OPERATION.");
                createLine("");
                createLine("STAY TUNED. MORE INFO TO COME.");
            }

            input.value="";
        }

    });
}

/* ===== MATRIX ===== */

const canvas=document.getElementById("matrix");
const ctx=canvas.getContext("2d");

canvas.height=window.innerHeight;
canvas.width=window.innerWidth;

const letters="01";
const fontSize=14;
const columns=canvas.width/fontSize;

const drops=[];
for(let i=0;i<columns;i++) drops[i]=1;

function draw(){

    ctx.fillStyle="rgba(0,0,0,0.05)";
    ctx.fillRect(0,0,canvas.width,canvas.height);

    ctx.fillStyle="#00ff00";
    ctx.font=fontSize+"px monospace";

    for(let i=0;i<drops.length;i++){

        const text=letters.charAt(Math.floor(Math.random()*letters.length));

        ctx.fillText(text,i*fontSize,drops[i]*fontSize);

        if(drops[i]*fontSize>canvas.height && Math.random()>0.975)
            drops[i]=0;

        drops[i]++;
    }
}

setInterval(draw,33);

/* START */
intro();

});
</script>

</body>
</html>
